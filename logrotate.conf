# Logrotate configuration for Medical Waste Management System
# Place this in: /etc/logrotate.d/mwms
#
# Linus-style: Simple, direct, no bullshit

# Gunicorn logs
PROJECT_DIR/gunicorn.log
PROJECT_DIR/access.log
PROJECT_DIR/error.log
PROJECT_DIR/debug.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 USER USER
    sharedscripts
    postrotate
        # Reload gunicorn gracefully if running
        [ -f PROJECT_DIR/gunicorn.pid ] && kill -USR1 $(cat PROJECT_DIR/gunicorn.pid) 2>/dev/null || true
    endscript
}

# Audit logs
PROJECT_DIR/logs/*.log {
    daily
    rotate 90
    compress
    delaycompress
    missingok
    notifempty
    create 0644 USER USER
    dateext
    dateformat -%Y%m%d
    extension .log
}